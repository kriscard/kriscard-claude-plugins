---
description: Validate ideation workflow outputs (contracts, PRDs, specs) for completeness and quality
argument-hint: '[project-name or path]'
allowed-tools: [Read, Glob, Grep, AskUserQuestion]
---

# Validate Output

Validates artifacts generated by the ideation workflow to ensure they follow templates, meet quality standards, and maintain consistency across contract → PRD → spec progression.

## Usage

```bash
# Validate by project name
/validate-output user-bookmarking

# Validate by path
/validate-output ./docs/ideation/user-bookmarking

# Validate all projects
/validate-output --all

# Validate specific artifact type
/validate-output user-bookmarking --type contract
/validate-output user-bookmarking --type prd
/validate-output user-bookmarking --type spec
```

## What This Does

This command validates ideation-specific artifacts against:
- Template conformance
- Confidence rubric criteria
- Inter-document consistency
- Phased implementation structure

**This is NOT the same as `architecture/check-spec`:**

| Command | Purpose | Scope |
|---------|---------|-------|
| `ideation/validate-output` | Validates ideation workflow outputs | Ideation templates, confidence rubric, phased structure |
| `architecture/check-spec` | Generic specification validation | Any specification document |

## Validation Workflow

### Phase 1: Discover Artifacts

```
1. Locate project directory:
   - If project name: ./docs/ideation/{project-name}/
   - If path: use provided path
   - If --all: scan ./docs/ideation/*/

2. Identify artifacts:
   - contract.md
   - prd-phase-*.md (all phases)
   - spec-phase-*.md (all phases)

3. Check for missing files
```

### Phase 2: Validate Contract

**Required sections (from contract-template.md):**
- Problem Statement
- Goals
- Success Criteria
- What We're NOT Building
- Assumptions
- Risks

**Quality checks:**
- [ ] Problem statement is specific (not vague)
- [ ] Goals are measurable
- [ ] Success criteria are verifiable
- [ ] Scope boundaries are clear
- [ ] Assumptions are documented
- [ ] Risks are identified

**Confidence validation:**
- Check if contract reflects 95%+ confidence
- Verify no major gaps remain

### Phase 3: Validate PRDs

**For each prd-phase-*.md:**

**Required sections (from prd-template.md):**
- Phase Overview
- User Stories
- Functional Requirements
- Non-Functional Requirements
- Dependencies
- Success Metrics

**Quality checks:**
- [ ] User stories follow format: "As a [who], I want [what], so that [why]"
- [ ] Requirements are specific and testable
- [ ] Dependencies are identified
- [ ] Success metrics are measurable
- [ ] Phase numbering is correct

**Phasing validation:**
- [ ] Phase 1 focuses on core functionality
- [ ] Each phase builds on previous
- [ ] No circular dependencies between phases

### Phase 4: Validate Specs

**For each spec-phase-*.md:**

**Required sections (from spec-template.md):**
- Architecture Overview
- Data Models
- API Specifications
- Component Breakdown
- Implementation Steps
- Testing Strategy

**Quality checks:**
- [ ] Architecture is described clearly
- [ ] Data models are complete
- [ ] APIs are fully specified
- [ ] Components are well-defined
- [ ] Implementation steps are actionable
- [ ] Testing approach is comprehensive

**Traceability:**
- [ ] Spec addresses all PRD requirements
- [ ] No orphaned requirements
- [ ] No undocumented features

### Phase 5: Cross-Document Consistency

**Contract ↔ PRD consistency:**
- [ ] PRD goals align with contract goals
- [ ] Success criteria in PRD match contract
- [ ] No scope creep (PRD within contract boundaries)

**PRD ↔ Spec consistency:**
- [ ] Spec implements all PRD requirements
- [ ] Spec architecture supports PRD features
- [ ] Spec metrics match PRD success metrics

**Phase alignment:**
- [ ] Same number of PRD and Spec phases
- [ ] Phase boundaries are consistent
- [ ] Dependencies across phases are valid

### Phase 6: Generate Report

```
═══════════════════════════════════
Ideation Output Validation Report
═══════════════════════════════════

Project: user-bookmarking
Path: ./docs/ideation/user-bookmarking/

✓ Contract (5/5 sections, 6/6 quality checks)
✓ PRD Phase 1 (6/6 sections, 5/5 quality checks)
✓ PRD Phase 2 (6/6 sections, 5/5 quality checks)
✓ Spec Phase 1 (6/6 sections, 6/6 quality checks)
✓ Spec Phase 2 (6/6 sections, 6/6 quality checks)

✓ Cross-Document Consistency (9/9 checks)

Overall Score: 100% (37/37 checks passed)

Status: ✓ Ready for implementation
```

## Validation Options

| Option | Description |
|--------|-------------|
| `--all` | Validate all projects in ./docs/ideation/ |
| `--type contract` | Validate only contract |
| `--type prd` | Validate only PRDs |
| `--type spec` | Validate only specs |
| `--strict` | Fail on warnings (not just errors) |
| `--fix` | Offer to fix common issues |

## Error Types

### Critical Errors (Fail validation)

- Missing required sections
- Malformed user stories
- Circular dependencies
- Contract-PRD misalignment
- PRD-Spec gaps

### Warnings (Pass with warnings)

- Missing optional sections
- Unclear wording
- Light on details
- Could improve specificity

### Suggestions (Informational)

- Consider adding examples
- Could expand testing strategy
- Might benefit from diagrams
- Consider edge cases

## Examples

### Example 1: Successful Validation

```bash
/validate-output user-bookmarking

Validation Report:
  ✓ Contract complete (all sections present)
  ✓ PRD Phase 1 complete
  ✓ PRD Phase 2 complete
  ✓ Spec Phase 1 complete
  ✓ Spec Phase 2 complete
  ✓ Cross-document consistency verified

Overall: 100% (37/37 checks passed)

Status: Ready for implementation ✓
```

### Example 2: Validation with Issues

```bash
/validate-output payment-integration

Validation Report:

Contract:
  ✓ 5/5 sections present
  ⚠ Warning: Success criteria could be more specific

PRD Phase 1:
  ✗ Error: Missing "Dependencies" section
  ✗ Error: User story 3 doesn't follow format
  ⚠ Warning: Non-functional requirements are vague

Spec Phase 1:
  ✓ 6/6 sections present
  ✗ Error: API spec incomplete (missing error responses)

Cross-Document:
  ✗ Error: PRD requirement "offline mode" not in spec

Overall: 68% (25/37 checks passed)

Status: ✗ Needs fixes before implementation

Recommended actions:
  1. Fix PRD Phase 1: Add Dependencies section
  2. Fix PRD Phase 1: Rewrite user story 3 using template
  3. Fix Spec Phase 1: Complete API error responses
  4. Fix Spec Phase 1: Add offline mode implementation
```

### Example 3: Validation with Auto-Fix

```bash
/validate-output user-bookmarking --fix

Found 3 fixable issues:
  1. User story 2 missing "so that" clause
  2. Success metrics not numbered
  3. Phase 2 PRD missing overview

Fix these automatically? [y/n]: y

Fixing issues...
  ✓ Fixed user story 2
  ✓ Numbered success metrics
  ✓ Added Phase 2 overview from contract

Re-validating...

Validation Report:
  ✓ All issues resolved
  Overall: 100% (37/37 checks passed)
```

## Integration with Ideation Workflow

**Recommended usage:**

```bash
# 1. Run ideation workflow
# (generates artifacts in ./docs/ideation/my-project/)

# 2. Validate outputs
/validate-output my-project

# 3. If issues found, regenerate or manually fix

# 4. Re-validate
/validate-output my-project

# 5. When 100%, proceed to implementation
```

## Quality Thresholds

| Score | Status | Action |
|-------|--------|--------|
| 100% | Ready | Proceed to implementation |
| 90-99% | Good | Minor fixes recommended |
| 75-89% | Fair | Address warnings before coding |
| < 75% | Poor | Significant rework needed |

## Validation Checklist

Generated for manual review:

```markdown
## Contract Validation
- [ ] Problem statement specific
- [ ] Goals measurable
- [ ] Success criteria verifiable
- [ ] Scope boundaries clear
- [ ] Assumptions documented
- [ ] Risks identified

## PRD Validation (per phase)
- [ ] User stories properly formatted
- [ ] Requirements testable
- [ ] Dependencies identified
- [ ] Success metrics measurable
- [ ] Phase builds on previous

## Spec Validation (per phase)
- [ ] Architecture clearly described
- [ ] Data models complete
- [ ] APIs fully specified
- [ ] Components well-defined
- [ ] Implementation actionable
- [ ] Testing comprehensive

## Cross-Document Validation
- [ ] Contract-PRD alignment
- [ ] PRD-Spec traceability
- [ ] No scope creep
- [ ] Phase consistency
```

## Common Issues and Fixes

### Issue: Missing Sections

**Problem:** Required template section not present

**Fix:**
```bash
/validate-output my-project --fix
# Adds missing section with placeholder text
```

**Manual fix:**
- Copy section from template
- Fill in project-specific content

### Issue: User Story Format

**Problem:** "I want to add a button" (missing who/why)

**Fix:** Rewrite as "As a [user], I want to [add a button], so that I can [submit the form]"

### Issue: PRD-Spec Gap

**Problem:** PRD requirement "offline support" not mentioned in spec

**Fix:** Add offline implementation section to spec, or remove from PRD if out of scope

### Issue: Circular Dependencies

**Problem:** Phase 1 depends on Phase 2

**Fix:** Reorder phases or move dependent features to same phase

### Issue: Vague Success Criteria

**Problem:** "Users should be happy"

**Fix:** Make measurable: "90% user satisfaction score in post-launch survey"

## Error Handling

| Error | Recovery Strategy |
|-------|-------------------|
| Project not found | List available projects |
| Malformed markdown | Report line number, offer to fix |
| Template mismatch | Show expected vs actual structure |
| Validation fails | Provide actionable fix suggestions |

## Future Enhancements

- [ ] Auto-fix common formatting issues
- [ ] Generate diff for template changes
- [ ] Integrate with CI/CD for validation gates
- [ ] Export validation report as PDF
- [ ] Track validation history over time

## See Also

- [ideation skill](../skills/ideation/SKILL.md) - Generates the artifacts
- [confidence-rubric](../skills/ideation/references/confidence-rubric.md) - Scoring criteria
- [contract-template](../skills/ideation/references/contract-template.md) - Contract structure
- [prd-template](../skills/ideation/references/prd-template.md) - PRD structure
- [spec-template](../skills/ideation/references/spec-template.md) - Spec structure
